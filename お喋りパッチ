cat >> "$HOME/shogi/wrapper/taso_engine.sh" <<'SH'

# =========================================================
# TALKATIVE PATCH â€” ã‚ˆãå–‹ã‚‹ãŒã€åˆ¤æ–­ã¯å¢—ã‚„ã•ãªã„
# =========================================================

# å–‹ã‚Šé‡ãƒˆã‚°ãƒ«ï¼ˆ0:å¾“æ¥ / 1:ã‚ˆãå–‹ã‚‹ï¼‰
TASO_TALKATIVE="${TASO_TALKATIVE:-1}"

# è»½ã„çŠ¶æ³ã‚³ãƒ¡ãƒ³ãƒˆï¼ˆæ–­å®šã—ãªã„ï¼‰
emit_soft_comment() {
  [ "$TASO_SHOW" = "1" ] || return 0
  [ "$TASO_TALKATIVE" = "1" ] || return 0

  local cp="$1" spread="$2"

  if [ "${spread#-}" -lt 100 ]; then
    say "ðŸ’¬ é¸æŠžè‚¢ãŒåºƒãã€æ–¹é‡ã¯ã¾ã å®šã¾ã‚Šã«ãã„å±€é¢"
  elif [ "${spread#-}" -lt 200 ]; then
    say "ðŸ’¬ å€™è£œæ‰‹ãŒå¾ã€…ã«çµžã‚‰ã‚Œã¦ãã¦ã„ã‚‹"
  else
    say "ðŸ’¬ æœ‰åŠ›æ‰‹ãŒã‹ãªã‚Šé™å®šã•ã‚Œã¦ãã¦ã„ã‚‹"
  fi

  if [ "${cp#-}" -lt 300 ]; then
    say "ðŸ’¬ è©•ä¾¡ã¯æºã‚Œã‚„ã™ãã€å½¢å‹¢åˆ¤æ–­ã¯æµå‹•çš„"
  else
    say "ðŸ’¬ è©•ä¾¡ã¯æ¯”è¼ƒçš„å®‰å®šã—ã¦ã„ã‚‹"
  fi
}

# goå‡¦ç†ã«ãƒ•ãƒƒã‚¯ï¼ˆæ—¢å­˜ãƒ­ã‚¸ãƒƒã‚¯ã‚’å£Šã•ãªã„ï¼‰
emit_talkative_on_go() {
  local cp1="$1" spread="$2"

  # å¿…ãš1è¡Œã¯å‡ºã™ï¼ˆæ²ˆé»™é˜²æ­¢ï¼‰
  say "ðŸ—£ TASOè§£æžä¸­ï¼šå±€é¢ã®ç‰¹å¾´ã‚’æ•´ç†ã—ã¦ã„ã¾ã™"

  emit_soft_comment "$cp1" "$spread"
}

SH
